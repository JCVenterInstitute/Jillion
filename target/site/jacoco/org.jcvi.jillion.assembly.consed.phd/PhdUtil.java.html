<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PhdUtil.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jillion</a> &gt; <a href="index.source.html" class="el_package">org.jcvi.jillion.assembly.consed.phd</a> &gt; <span class="el_source">PhdUtil.java</span></div><h1>PhdUtil.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * Jillion development code
 * 
 * This code may be freely distributed and modified under the
 * terms of the GNU Lesser General Public License.  This should
 * be distributed with the code.  If you do not have a copy,
 *  see:
 * 
 *          http://www.gnu.org/copyleft/lesser.html
 * 
 * 
 * Copyright for this code is held jointly by the individual authors.  These should be listed in the @author doc comments.
 * 
 * Information about Jillion can be found on its homepage
 * 
 *         http://jillion.sourceforge.net
 * 
 * Contributors:
 *     Danny Katzel - initial API and implementation
 ******************************************************************************/
package org.jcvi.jillion.assembly.consed.phd;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.Locale;
import java.util.Map;

import org.jcvi.jillion.assembly.consed.ace.AceFileUtil;

/**
 * {@code PhdUtil} is a Utility class for Phred Phd data.
 * @author dkatzel
 *
 *
 */
public final class PhdUtil {
	/**
	 * Use {@link ThreadLocal} since each DateFormat instance
	 * is mutable and not Thread safe.
	 * This should let us avoid synchronization.
	 */
<span class="fc" id="L45">	private static ThreadLocal&lt;DateFormat&gt; PHD_TAG_DATE_FORMATTER = new ThreadLocal&lt;DateFormat&gt;(){</span>

		  @Override
		  public DateFormat get() {
<span class="fc" id="L49">		   return super.get();</span>
		  }

		  @Override
		  protected DateFormat initialValue() {
<span class="fc" id="L54">		   return new SimpleDateFormat(&quot;MM/dd/yy HH:mm:ss&quot;, Locale.US);</span>
		  }

		  @Override
		  public void remove() {
<span class="nc" id="L59">		   super.remove();</span>
<span class="nc" id="L60">		  }</span>

		  @Override
		  public void set(DateFormat value) {
<span class="nc" id="L64">		   super.set(value);</span>
<span class="nc" id="L65">		  }</span>

		 };
	
<span class="nc" id="L69">	private PhdUtil(){</span>
		//can not instantiate
<span class="nc" id="L71">	}</span>
    /**
     * Parse the given Phd formatted date string into a {@link Date}.
     * @param dateString the date string to parse;
     * can not be null.
     * @return a new Date; will never be null.
     * @throws ParseException if the date String is in the 
     * wrong format.
     */
	public static Date parseReadTagDate(String dateString) throws ParseException{
<span class="fc" id="L81">		return PHD_TAG_DATE_FORMATTER.get().parse(dateString);</span>
	}
	/**
	 * Format the given date into the String
	 * representation used by Phd tags.
	 * @param date the date to format;
	 * can not be null.
	 * @return a new String will never be null or empty.
	 */
	public static String formatReadTagDate(Date date){
<span class="fc" id="L91">		return PHD_TAG_DATE_FORMATTER.get().format(date);</span>
	}
    /**
     * Phd records must include a date time stamp as a comment,
     * this method will create the correctly formatted Phd {@code TIME}
     * comment.  
     * @param phdDate the {@link Date} to make into a Phd TIME
     * comment.
     * @return a Properties object (not null) that contains
     * a single property, TIME.
     */
    public static Map&lt;String,String&gt; createPhdTimeStampCommentFor(Date phdDate){
<span class="fc" id="L103">    	Map&lt;String,String&gt; comments = new HashMap&lt;String, String&gt;();</span>
<span class="fc" id="L104">        comments.put(&quot;TIME&quot;, AceFileUtil.formatPhdDate(phdDate));        </span>
<span class="fc" id="L105">        return comments;</span>
    }
    /**
     * Phd records must include a date time stamp as a comment,
     * this method will create the correctly formatted Phd {@code TIME}
     * comment.  
     * @param phdDate the {@link Date} to make into a Phd TIME
     * comment.
     * @param filename the name of the chromatogram file to link back to.
     * @return a Properties object (not null) that contains
     * a single property, TIME.
     */
    public static Map&lt;String,String&gt; createPhdTimeStampAndChromatFileCommentsFor(Date phdDate, String filename){
<span class="nc" id="L118">    	Map&lt;String,String&gt; comments = new HashMap&lt;String, String&gt;();</span>
<span class="nc" id="L119">        comments.put(&quot;TIME&quot;, AceFileUtil.formatPhdDate(phdDate));    </span>
<span class="nc" id="L120">        comments.put(&quot;CHROMAT_FILE&quot;, filename);  </span>
<span class="nc" id="L121">        return comments;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>